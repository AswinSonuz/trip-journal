<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Travel Journal</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:'Inter', system-ui, -apple-system;
}

/* Background */
body{
  margin:0;
  background:#f4f2ee;
  color:#1e1e1e;
}

/* Header */
header{
  padding:22px 16px;
  text-align:center;
  font-size:22px;
  font-weight:600;
  background:#ffffff;
  border-bottom:1px solid #e6e6e6;
}

/* Layout */
.container{
  max-width:480px;
  margin:auto;
  padding:18px;
}

/* Card */
.card{
  background:#ffffff;
  border-radius:22px;
  padding:18px;
  margin-bottom:18px;
  box-shadow:
    0 10px 30px rgba(0,0,0,0.06),
    0 2px 8px rgba(0,0,0,0.04);
}

/* Headings */
h2{
  font-size:22px;
  margin:0 0 12px;
}

h3{
  font-size:17px;
  margin:0 0 10px;
}

/* Inputs */
input, textarea{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid #e1e1e1;
  background:#fafafa;
  font-size:14px;
  margin-bottom:12px;
  color:#1e1e1e;
}

textarea{
  resize:none;
  height:90px;
  line-height:1.6;
}

/* Buttons */
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  font-size:15px;
  font-weight:600;
  background:#1e1e1e;
  color:#ffffff;
}

/* Places */
.place{
  display:flex;
  align-items:center;
  gap:12px;
  font-size:15px;
  margin-bottom:10px;
}

.place input{
  transform:scale(1.2);
}

/* Journal */
.journal{
  background:#fdfcfb;
  border-radius:22px;
  padding:20px;
}

.journal h3{
  margin-top:20px;
}

.journal p{
  font-size:15px;
  line-height:1.7;
  margin:6px 0;
  color:#333;
}

.journal img{
  width:100%;
  border-radius:18px;
  margin:14px 0;
}

/* Small text */
.small{
  font-size:13px;
  color:#777;
}

/* Export Page */
.export-page{
  background:#fdfcfb;
  color:#222;
  padding:28px;
}

.export-page h1{
  font-size:30px;
  margin-bottom:6px;
}

.entry{
  margin-bottom:48px;
}

.entry img{
  width:100%;
  border-radius:20px;
  margin:18px 0;
}
</style>
</head>

<body>

<header>Travel Journal</header>

<div class="container">

<!-- Backup -->
<div class="card">
  <button onclick="exportBackup()">Backup Journal</button>
  <input type="file" accept="application/json" onchange="importBackup(event)">
  <p class="small">Download backup regularly to keep your memories safe</p>
</div>

<!-- Kerala Places -->
<div class="card">
  <h3>Places Visited (Kerala)</h3>
  <div class="place"><input type="checkbox"> Munnar</div>
  <div class="place"><input type="checkbox"> Varkala</div>
  <div class="place"><input type="checkbox"> Alappuzha</div>
  <div class="place"><input type="checkbox"> Wayanad</div>
  <div class="place"><input type="checkbox"> Fort Kochi</div>
  <div class="place"><input type="checkbox"> Athirappilly</div>
</div>

<!-- Add Entry -->
<div class="card">
  <h3>Add Memory</h3>
  <input id="placeName" placeholder="Place name">
  <textarea id="memory" placeholder="Memory or experience"></textarea>
  <textarea id="learned" placeholder="Things I learned"></textarea>
  <textarea id="change" placeholder="How this place changed me"></textarea>
  <input type="file" id="photo" accept="image/*">
  <button onclick="addEntry()">Add Memory</button>
</div>

<!-- Journal -->
<div class="card journal" id="journal">
  <h2>My Journal</h2>
</div>

<!-- Export -->
<div class="card">
  <button onclick="generateJournal()">Generate Journal Page</button>
</div>

</div>

<script>
let journalData = JSON.parse(localStorage.getItem("travelJournal")) || [];

function save(){
  localStorage.setItem("travelJournal", JSON.stringify(journalData));
}

function addEntry(){
  if(!placeName.value) return alert("Place name required");

  const entry={
    place:placeName.value,
    memory:memory.value,
    learned:learned.value,
    change:change.value,
    image:null
  };

  const file=photo.files[0];
  if(file){
    const reader=new FileReader();
    reader.onload=()=>{
      entry.image=reader.result;
      journalData.push(entry);
      save(); render();
    };
    reader.readAsDataURL(file);
  }else{
    journalData.push(entry);
    save(); render();
  }

  placeName.value=memory.value=learned.value=change.value="";
  photo.value="";
}

function render(){
  const j=document.getElementById("journal");
  j.innerHTML="<h2>My Journal</h2>";

  journalData.forEach(e=>{
    j.innerHTML+=`
      <h3>${e.place}</h3>
      ${e.image?`<img src="${e.image}">`:""}
      <p><b>Memory:</b> ${e.memory}</p>
      <p><b>Learned:</b> ${e.learned}</p>
      <p><b>Change:</b> ${e.change}</p>
      <hr>
    `;
  });
}

function exportBackup(){
  const blob=new Blob(
    [JSON.stringify(journalData,null,2)],
    {type:"application/json"}
  );
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="travel-journal-backup.json";
  a.click();
}

function importBackup(e){
  const file=e.target.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=()=>{
    journalData=JSON.parse(reader.result);
    save(); render();
  };
  reader.readAsText(file);
}

function generateJournal(){
  if(!journalData.length) return alert("No entries yet");

  const win=window.open("","_blank");
  let html=`
  <html>
  <head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>${document.querySelector("style").innerHTML}</style>
  </head>
  <body class="export-page">
  <h1>My Travel Journal</h1>
  `;

  journalData.forEach(e=>{
    html+=`
      <div class="entry">
        <h2>${e.place}</h2>
        ${e.image?`<img src="${e.image}">`:""}
        <p>${e.memory}</p>
        <p>${e.learned}</p>
        <p>${e.change}</p>
      </div>
    `;
  });

  html+=`<script>window.onload=()=>window.print();<\/script></body></html>`;
  win.document.write(html);
  win.document.close();
}

render();
</script>

</body>
</html>